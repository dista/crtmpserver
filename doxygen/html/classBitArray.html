<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>crtmpserver: BitArray Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">crtmpserver</div>
   <div id="projectbrief">AmediaserverforAdobe®Flash®,Apple®iOSdevicesandblahblah.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>BitArray Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="BitArray" --><!-- doxytag: inherits="IOBuffer" -->
<p><code>#include &lt;<a class="el" href="bitarray_8h_source.html">bitarray.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BitArray:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBitArray.png" usemap="#BitArray_map" alt=""/>
  <map id="BitArray_map" name="BitArray_map">
<area href="classIOBuffer.html" alt="IOBuffer" shape="rect" coords="0,0,60,24"/>
</map>
 </div></div>

<p><a href="classBitArray-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBitArray.html#a611f4d891d6f6db51468448da73d3f1e">BitArray</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBitArray.html#aa91f53e8861ad420b61bee257e9bae9a">~BitArray</a> ()</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBitArray.html#a4908560c6757d8be30b8f86a2a024e37">PutBits</a> (T data, uint8_t count)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">T&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBitArray.html#a8b27ffcf2339c72625c62d80420d0a05">ReadBits</a> (uint8_t count)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">T&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBitArray.html#ae1b4a2fd8044c9c69e1c89a689a77382">PeekBits</a> (uint8_t count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBitArray.html#acf4185336b1659e3aa609461d057bf0b">IgnoreBits</a> (uint32_t count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBitArray.html#a784aac487a523303fa2e52d4cc28766e">AvailableBits</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBitArray.html#a8de765d1fa10fb56d1f4397f54b50526">ReadExpGolomb</a> (uint64_t &amp;value)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00026">26</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a611f4d891d6f6db51468448da73d3f1e"></a><!-- doxytag: member="BitArray::BitArray" ref="a611f4d891d6f6db51468448da73d3f1e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BitArray::BitArray </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00032">32</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
<div class="fragment"><pre class="fragment">                   : <a class="code" href="classIOBuffer.html#aaddfcb5f6c59ca99d262dd9fafd8ecf0">IOBuffer</a>() {
                <a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> = 0;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aa91f53e8861ad420b61bee257e9bae9a"></a><!-- doxytag: member="BitArray::~BitArray" ref="aa91f53e8861ad420b61bee257e9bae9a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual BitArray::~BitArray </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00036">36</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
<div class="fragment"><pre class="fragment">                            {

        }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a784aac487a523303fa2e52d4cc28766e"></a><!-- doxytag: member="BitArray::AvailableBits" ref="a784aac487a523303fa2e52d4cc28766e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t BitArray::AvailableBits </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00112">112</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
<div class="fragment"><pre class="fragment">                                 {
                <span class="keywordflow">return</span> <a class="code" href="iobuffer_8h.html#a23d30f9ed61d45104297ac1288875dd5">GETAVAILABLEBYTESCOUNT</a>(*<span class="keyword">this</span>)*8 - <a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="acf4185336b1659e3aa609461d057bf0b"></a><!-- doxytag: member="BitArray::IgnoreBits" ref="acf4185336b1659e3aa609461d057bf0b" args="(uint32_t count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BitArray::IgnoreBits </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00100">100</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
                <span class="keywordflow">if</span> (<a class="code" href="iobuffer_8h.html#a23d30f9ed61d45104297ac1288875dd5">GETAVAILABLEBYTESCOUNT</a>(*<span class="keyword">this</span>) == 0) {
                        assert(<span class="keyword">false</span>);
                }

                <span class="keywordflow">if</span> (<a class="code" href="iobuffer_8h.html#a23d30f9ed61d45104297ac1288875dd5">GETAVAILABLEBYTESCOUNT</a>(*<span class="keyword">this</span>) &lt; (<a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> + count) / 8) {
                        assert(<span class="keyword">false</span>);
                }

                <a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> += count;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ae1b4a2fd8044c9c69e1c89a689a77382"></a><!-- doxytag: member="BitArray::PeekBits" ref="ae1b4a2fd8044c9c69e1c89a689a77382" args="(uint8_t count)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T BitArray::PeekBits </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00072">72</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
                T result = 0;

                <span class="keywordflow">if</span> (<a class="code" href="iobuffer_8h.html#a23d30f9ed61d45104297ac1288875dd5">GETAVAILABLEBYTESCOUNT</a>(*<span class="keyword">this</span>) == 0) {
                        assert(<span class="keyword">false</span>);
                }

                <span class="keywordflow">if</span> (<a class="code" href="iobuffer_8h.html#a23d30f9ed61d45104297ac1288875dd5">GETAVAILABLEBYTESCOUNT</a>(*<span class="keyword">this</span>) &lt; (<a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> + count) / 8) {
                        assert(<span class="keyword">false</span>);
                }

                <span class="keywordflow">if</span> (count&gt;<span class="keyword">sizeof</span> (T)*8) {
                        assert(<span class="keyword">false</span>);
                }

                <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; count; i++) {
                        uint32_t currentCursor = <a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> + i;
                        uint8_t currentByteIndex = (uint8_t) (currentCursor / 8);
                        uint8_t currentBitIndex = currentCursor % 8;
                        uint8_t currentByte = <a class="code" href="iobuffer_8h.html#aed6fd97222265185cb7d8fce70eaccd4">GETIBPOINTER</a>(*<span class="keyword">this</span>)[currentByteIndex];
                        
                        result = (result &lt;&lt; 1) | ((currentByte &gt;&gt; (7 - currentBitIndex))&amp;0x01);
                }


                <span class="keywordflow">return</span> result;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a4908560c6757d8be30b8f86a2a024e37"></a><!-- doxytag: member="BitArray::PutBits" ref="a4908560c6757d8be30b8f86a2a024e37" args="(T data, uint8_t count)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool BitArray::PutBits </td>
          <td>(</td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00042">42</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
                <span class="keywordflow">if</span> (!<a class="code" href="classIOBuffer.html#a4fc721f3e44ce43dc15159cbd84e5c40" title="Makes sure that there is enough memory space in the buffer. If space is not enough, a new buffer is created.">EnsureSize</a>(<span class="keyword">sizeof</span> (T)))
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;

                uint8_t *pBuffer = <a class="code" href="iobuffer_8h.html#aed6fd97222265185cb7d8fce70eaccd4">GETIBPOINTER</a>(*<span class="keyword">this</span>);

                <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; count; i++) {
                        uint8_t srcBitIndex = <span class="keyword">sizeof</span> (T)*8 - count + i;
                        uint8_t dstByteIndex = (uint8_t) ((<a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> + i) / 8);
                        uint8_t dstBitIndex = (<a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> + i) % 8;
                        <span class="keywordflow">if</span> (dstBitIndex == 0) {
                                pBuffer[dstByteIndex] = 0;
                        }
                        T flag = (data &lt;&lt; srcBitIndex);
                        flag = (flag &gt;&gt; (<span class="keyword">sizeof</span> (T)*8 - 1));
                        pBuffer[dstByteIndex] |= (flag &lt;&lt; (7 - dstBitIndex));
                }
                <a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> += count;
                <a class="code" href="classIOBuffer.html#ae4927a037069088e5b5a5222f6c2b902">_published</a> = (<a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> / 8)+(((<a class="code" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">_cursor</a> % 8) == 0) ? 0 : 1);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a8b27ffcf2339c72625c62d80420d0a05"></a><!-- doxytag: member="BitArray::ReadBits" ref="a8b27ffcf2339c72625c62d80420d0a05" args="(uint8_t count)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T BitArray::ReadBits </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00065">65</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
                T result = PeekBits&lt;T &gt; (count);
                <a class="code" href="classBitArray.html#acf4185336b1659e3aa609461d057bf0b">IgnoreBits</a>(count);
                <span class="keywordflow">return</span> result;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a8de765d1fa10fb56d1f4397f54b50526"></a><!-- doxytag: member="BitArray::ReadExpGolomb" ref="a8de765d1fa10fb56d1f4397f54b50526" args="(uint64_t &amp;value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BitArray::ReadExpGolomb </td>
          <td>(</td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00116">116</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
                value = 1;
                uint32_t zeroBitsCount = 0;
                <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
                        <span class="keywordflow">if</span> (<a class="code" href="classBitArray.html#a784aac487a523303fa2e52d4cc28766e">AvailableBits</a>() == 0) {
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                        <span class="keywordflow">if</span> (ReadBits&lt;bool&gt;(1)) {
                                <span class="keywordflow">break</span>;
                        }
                        zeroBitsCount++;
                }
                <span class="keywordflow">if</span> (<a class="code" href="classBitArray.html#a784aac487a523303fa2e52d4cc28766e">AvailableBits</a>() &lt; zeroBitsCount) {
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; zeroBitsCount; i++) {
                        value = ((value &lt;&lt; 1) | (ReadBits&lt;uint8_t &gt; (1)));
                }
                value = value - 1;
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a4f58f49b7787e380c0944123c752a22b"></a><!-- doxytag: member="BitArray::_cursor" ref="a4f58f49b7787e380c0944123c752a22b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBitArray.html#a4f58f49b7787e380c0944123c752a22b">BitArray::_cursor</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bitarray_8h_source.html#l00029">29</a> of file <a class="el" href="bitarray_8h_source.html">bitarray.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>branches/1.0/sources/common/include/utils/buffering/<a class="el" href="bitarray_8h_source.html">bitarray.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Oct 19 2011 15:53:38 for crtmpserver by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
