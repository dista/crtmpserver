<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>crtmpserver: branches/1.0/sources/androidapplestreaming/include/api.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">crtmpserver</div>
   <div id="projectbrief">AmediaserverforAdobe®Flash®,Apple®iOSdevicesandblahblah.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>branches/1.0/sources/androidapplestreaming/include/api.h File Reference</h1>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;common.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="jniwrapper_8h_source.html">jniwrapper.h</a>&quot;</code><br/>
</div>
<p><a href="api_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a3165fcd3d71c33651a56499cb77e7252">EnvRun</a> (string ip, uint16_t port, int logLevel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#adc00f885c960e094ddd7341b21d73426">WaitEnvReady</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a8ace7da838c2aa40c7118df89795ef29">EnvStop</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#aa0aa7908e61e8b5c2aa846bcbbf932f3">ContextCreate</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a33f2c1658e31d9032f62d8d0bcc4748a">ContextList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#aea272485a8617f769a21fedeb3af13e8">ContextClose</a> (uint32_t contextId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a420902079529829532e07c1d9ba5079a">ContextCloseAll</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a8194c9da3397f5b5a3bec419a188be5a">CommandSetBitrates</a> (uint32_t contextId, string bitRates)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a0dacb19faa096fa654d4239099e6fc66">CommandPlay</a> (uint32_t contextId, string connectingString)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#aa49d4e6ebdab00d108a487d06ea7169a">CommandPlay</a> (uint32_t contextId, string m3u8Uri, string httpSessionId, string keyPassword)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a3eaaf23cde1cd2918db590c628004813">CommandPause</a> (uint32_t contextId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a7a1a42e46812b36560b407c15169134e">CommandResume</a> (uint32_t contextId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a1453efc19fff0a334b1f19df2829d0d8">CommandSelectBandwidth</a> (uint32_t contextId, uint32_t bandwidth)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#aa1e7bba315953a016318c32d83f5e329">CommandSeek</a> (uint32_t contextId, double value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a4ffde8bb529afeadf917ad0a53643842">CommandSelectAVChannels</a> (uint32_t contextId, uint32_t audioChannel, uint32_t videoChannel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a4675628c3e59a905828e980a254398b6">InfoListStreams</a> (uint32_t contextId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#ac23324ee9e7114a0a481c22edeb105b3">InfoListAllStreams</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a629bc43d7bf391de3a2f97bb3e1d1adb">InfoBandwidth</a> (uint32_t contextId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVariant.html">Variant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="api_8h.html#a8d6e62746bf0d328d3f97bcb433c951f">InfoPlayback</a> (uint32_t contextId)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3eaaf23cde1cd2918db590c628004813"></a><!-- doxytag: member="api.h::CommandPause" ref="a3eaaf23cde1cd2918db590c628004813" args="(uint32_t contextId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> CommandPause </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00332">332</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#a8af503787d2d535a3a936f212e8044c8">ASC_REQ_BUILD_COMMAND_PAUSE</a>(request, contextId);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0dacb19faa096fa654d4239099e6fc66"></a><!-- doxytag: member="api.h::CommandPlay" ref="a0dacb19faa096fa654d4239099e6fc66" args="(uint32_t contextId, string connectingString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> CommandPlay </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>connectingString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00291">291</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {
        vector&lt;string&gt; parts;
        split(connectingString, <span class="stringliteral">&quot;:&quot;</span>, parts);
        <span class="keywordflow">if</span> ((parts.size() != 1) &amp;&amp; (parts.size() != 2)) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Invalid connecting string %s&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(connectingString));
        }
        <span class="keywordtype">string</span> b64encoded;
        <span class="keywordflow">if</span> (parts.size() == 1)
                b64encoded = parts[0];
        <span class="keywordflow">else</span>
                b64encoded = parts[1];
        <span class="keywordtype">string</span> all = <a class="code" href="crypto_8h.html#aab6d4463dc43d8c63cace4961156bc29">unb64</a>(b64encoded);
        split(all, <span class="stringliteral">&quot;|&quot;</span>, parts);
        <span class="keywordflow">if</span> ((parts.size() != 1) &amp;&amp; (parts.size() != 3)) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Invalid connecting string %s&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(all));
        }
        <span class="keywordtype">string</span> uri = parts[0];
        <span class="keywordtype">string</span> keyPassword = <span class="stringliteral">&quot;&quot;</span>;
        <span class="keywordtype">string</span> httpSessionId = <span class="stringliteral">&quot;&quot;</span>;
        <span class="keywordflow">if</span> (parts.size() == 3) {
                keyPassword = parts[1];
                httpSessionId = parts[2];
        }
        <a class="code" href="logging_8h.html#ad23956c66ba8998d24d95b0a4a9f3f6b">FINEST</a>(<span class="stringliteral">&quot;uri: `%s`\nkeyPassword: `%s`\nhttpSessionId: `%s`&quot;</span>,
                        <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(uri),
                        <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(keyPassword), <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(httpSessionId));
        <span class="keywordflow">if</span> (uri == <span class="stringliteral">&quot;&quot;</span>) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Invalid connecting string: %s&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(connectingString));
        }
        <span class="keywordflow">return</span> <a class="code" href="api_8h.html#a0dacb19faa096fa654d4239099e6fc66">CommandPlay</a>(contextId, uri, httpSessionId, keyPassword);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa49d4e6ebdab00d108a487d06ea7169a"></a><!-- doxytag: member="api.h::CommandPlay" ref="aa49d4e6ebdab00d108a487d06ea7169a" args="(uint32_t contextId, string m3u8Uri, string httpSessionId, string keyPassword)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> CommandPlay </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>m3u8Uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>httpSessionId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>keyPassword</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00323">323</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                    {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#afcfed33b6de7187b6781ec2f522a05a6">ASC_REQ_BUILD_COMMAND_PLAY</a>(request, contextId, m3u8Uri, httpSessionId, keyPassword);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a1a42e46812b36560b407c15169134e"></a><!-- doxytag: member="api.h::CommandResume" ref="a7a1a42e46812b36560b407c15169134e" args="(uint32_t contextId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> CommandResume </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00340">340</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#a5385ed011177a6166501c8f38c483505">ASC_REQ_BUILD_COMMAND_RESUME</a>(request, contextId);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa1e7bba315953a016318c32d83f5e329"></a><!-- doxytag: member="api.h::CommandSeek" ref="aa1e7bba315953a016318c32d83f5e329" args="(uint32_t contextId, double value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> CommandSeek </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00356">356</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                      {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#ae7a01b46d66de093eaba9d1caa6b19e9">ASC_REQ_BUILD_COMMAND_SEEK</a>(request, contextId, value);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4ffde8bb529afeadf917ad0a53643842"></a><!-- doxytag: member="api.h::CommandSelectAVChannels" ref="a4ffde8bb529afeadf917ad0a53643842" args="(uint32_t contextId, uint32_t audioChannel, uint32_t videoChannel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> CommandSelectAVChannels </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>audioChannel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>videoChannel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00364">364</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                       {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#ab0faa1cd1b536e1c856744938c0316c8">ASC_REQ_BUILD_COMMAND_SELECT_AV_CHANNELS</a>(request, contextId, audioChannel, videoChannel);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1453efc19fff0a334b1f19df2829d0d8"></a><!-- doxytag: member="api.h::CommandSelectBandwidth" ref="a1453efc19fff0a334b1f19df2829d0d8" args="(uint32_t contextId, uint32_t bandwidth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> CommandSelectBandwidth </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bandwidth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00348">348</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                       {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#aca6957ab1588d9d78a160d8513d9af88">ASC_REQ_BUILD_COMMAND_SELECT_BANDWIDTH</a>(request, contextId, bandwidth);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8194c9da3397f5b5a3bec419a188be5a"></a><!-- doxytag: member="api.h::CommandSetBitrates" ref="a8194c9da3397f5b5a3bec419a188be5a" args="(uint32_t contextId, string bitRates)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> CommandSetBitrates </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>bitRates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00268">268</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {
        replace(bitRates, <span class="stringliteral">&quot;[&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
        replace(bitRates, <span class="stringliteral">&quot;]&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
        vector&lt;string&gt; parts;
        split(bitRates, <span class="stringliteral">&quot;,&quot;</span>, parts);

        vector&lt;uint32_t&gt; bws;
        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; parts.size(); i++) {
                <span class="keywordtype">string</span> strBw = parts[i];
                trim(strBw);
                <span class="keywordflow">if</span> (strBw == <span class="stringliteral">&quot;&quot;</span>)
                        <span class="keywordflow">continue</span>;
                uint32_t bw = (uint32_t) atol(<a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(strBw));
                <a class="code" href="baseplatform_8h.html#a40d18ac8defd2bbcd29f1a09e6843864">ADD_VECTOR_END</a>(bws, bw);
        }

        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#a6cd5bd30856e5746e51433d323f0823f">ASC_REQ_BUILD_COMMAND_SET_BITRATES</a>(request, contextId, bws);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aea272485a8617f769a21fedeb3af13e8"></a><!-- doxytag: member="api.h::ContextClose" ref="aea272485a8617f769a21fedeb3af13e8" args="(uint32_t contextId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> ContextClose </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00252">252</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#a8128a194bb3dedbd15bf5791675b40db">ASC_REQ_BUILD_CONTEXT_CLOSE</a>(request, contextId);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a420902079529829532e07c1d9ba5079a"></a><!-- doxytag: member="api.h::ContextCloseAll" ref="a420902079529829532e07c1d9ba5079a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> ContextCloseAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00260">260</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                          {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#aa77c192016eeca20b0952008324e930c">ASC_REQ_BUILD_CONTEXT_CLOSE_ALL</a>(request);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa0aa7908e61e8b5c2aa846bcbbf932f3"></a><!-- doxytag: member="api.h::ContextCreate" ref="aa0aa7908e61e8b5c2aa846bcbbf932f3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> ContextCreate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00236">236</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                        {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#ae3915e4ff328fd7218c722f7b15da358">ASC_REQ_BUILD_CONTEXT_CREATE</a>(request);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a33f2c1658e31d9032f62d8d0bcc4748a"></a><!-- doxytag: member="api.h::ContextList" ref="a33f2c1658e31d9032f62d8d0bcc4748a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> ContextList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00244">244</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                      {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#a1e5722527e44aedc2e16e99d19344a9d">ASC_REQ_BUILD_CONTEXT_LIST</a>(request);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3165fcd3d71c33651a56499cb77e7252"></a><!-- doxytag: member="api.h::EnvRun" ref="a3165fcd3d71c33651a56499cb77e7252" args="(string ip, uint16_t port, int logLevel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnvRun </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>logLevel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00051">51</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="comment">//1. Initialize the logger</span>
        logLevel = logLevel &lt; 0 ? 0 : logLevel;
        logLevel = logLevel &gt;= <a class="code" href="defines_8h.html#ae270070f57b62a1788401965b236f6b2">_FINEST_</a> ? <a class="code" href="defines_8h.html#ae270070f57b62a1788401965b236f6b2">_FINEST_</a> : logLevel;
        <a class="code" href="classLogger.html#a42c282f4c0e2c6557d16e2967c1ddf7e">Logger::Init</a>();
        <a class="code" href="classBaseLogLocation.html" title="Base class that all logging must derive from.">BaseLogLocation</a> *pLogLocation = NULL;
<span class="preprocessor">#ifdef ANDROID</span>
<span class="preprocessor"></span>        pLogLocation = <span class="keyword">new</span> LogCatLogLocation();
        pLogLocation-&gt;<a class="code" href="classBaseLogLocation.html#a210a45b1cbe4e34e91049acac641d2ae">SetLevel</a>(logLevel);
        <a class="code" href="classLogger.html#a10c51f401b39d5bd82ff20f109c92f7b">Logger::AddLogLocation</a>(pLogLocation);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>        pLogLocation = <span class="keyword">new</span> <a class="code" href="classConsoleLogLocation.html">ConsoleLogLocation</a>(<span class="keyword">true</span>);
        pLogLocation-&gt;<a class="code" href="classBaseLogLocation.html#a210a45b1cbe4e34e91049acac641d2ae">SetLevel</a>(logLevel);
        <a class="code" href="classLogger.html#a10c51f401b39d5bd82ff20f109c92f7b">Logger::AddLogLocation</a>(pLogLocation);
<span class="preprocessor">#endif </span><span class="comment">/* ANDROID */</span>

<span class="preprocessor">#ifdef BUILD_SIGNATURE</span>
<span class="preprocessor"></span>        <span class="comment">//1.1 Create the settings string</span>
        <a class="code" href="logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a>(<span class="stringliteral">&quot;Build signature:\n%s&quot;</span>, BUILD_SIGNATURE);
<span class="preprocessor">#endif </span><span class="comment">/* BUILD_SIGNATURE */</span>

        <span class="comment">//2. Create the default protocol factory</span>
        <a class="code" href="classDefaultProtocolFactory.html">DefaultProtocolFactory</a> *pFactory = <span class="keyword">new</span> <a class="code" href="classDefaultProtocolFactory.html">DefaultProtocolFactory</a>();
        <span class="keywordflow">if</span> (!<a class="code" href="classProtocolFactoryManager.html#a55f7f1300803201fde350b4f33c90064" title="Registers the atomic protocols and protocol chains of the factory.">ProtocolFactoryManager::RegisterProtocolFactory</a>(pFactory)) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Unable to register default protocols factory&quot;</span>);
        }

        <span class="comment">//3. Initialize the I/O</span>
        <a class="code" href="crtmpserver_8cpp.html#a248c764067ee60c03ee370784c49f353">IOHandlerManager::Initialize</a>();

        <span class="comment">//4. Create the AppleStreamingClientApplication application</span>
        <a class="code" href="classVariant.html">Variant</a> configuration;
        configuration[<a class="code" href="defines_8h.html#a22fa4bfe8a3269ad81cfbc0a55112dd0">CONF_APPLICATION_NAME</a>] = <span class="stringliteral">&quot;applestreaminclient&quot;</span>;
        configuration[<a class="code" href="defines_8h.html#a45ed72b03bc9d223aa818b96af34b427">CONF_APPLICATION_ALIASES</a>].<a class="code" href="classVariant.html#a83e99f17906f01517d8a9eebf4a89584">PushToArray</a>(<span class="stringliteral">&quot;asc&quot;</span>);
        configuration[<a class="code" href="defines_8h.html#aa5bbf6540bcbc491389416e331135e92">CONF_APPLICATION_DEFAULT</a>] = (bool)<span class="keyword">true</span>;
        configuration[<a class="code" href="defines_8h.html#ab6119f94415afe80f174dcdeda3d8d0c">CONF_APPLICATION_VALIDATEHANDSHAKE</a>] = (bool)<span class="keyword">true</span>;
        configuration[<a class="code" href="defines_8h.html#a21e3a66019ea8bd016be2aa68c58fb13">CONF_APPLICATION_KEYFRAMESEEK</a>] = (bool)<span class="keyword">true</span>;
        configuration[<a class="code" href="defines_8h.html#acd6ba5b4a9665a65b084b5e59db654e9">CONF_APPLICATION_CLIENTSIDEBUFFER</a>] = (int32_t) 15;
        configuration[<a class="code" href="defines_8h.html#a5b29498b7455e40d370ac019b85cd589">CONF_APPLICATION_SEEKGRANULARITY</a>] = 1.00;
        configuration[<a class="code" href="defines_8h.html#a686a6da342215e007050f2fc12eb89ce">CONF_APPLICATION_MEDIAFOLDER</a>] = <span class="stringliteral">&quot;./&quot;</span>;
        configuration[<a class="code" href="defines_8h.html#ad253bcc562976b2408907002938deda8">CONF_APPLICATION_GENERATE_META_FILES</a>] = (bool)<span class="keyword">false</span>;
        configuration[<span class="stringliteral">&quot;rtspHost&quot;</span>] = format(<span class="stringliteral">&quot;rtsp://127.0.0.1:%hu/&quot;</span>, port);
        <a class="code" href="classapp__applestreamingclient_1_1AppleStreamingClientApplication.html">AppleStreamingClientApplication</a> *pApp = <span class="keyword">new</span> <a class="code" href="classapp__applestreamingclient_1_1AppleStreamingClientApplication.html">AppleStreamingClientApplication</a>(
                        configuration);
<span class="preprocessor">#ifdef ANDROID</span>
<span class="preprocessor"></span>        pApp-&gt;SetJavaCallBackInterface(ci);
<span class="preprocessor">#endif </span><span class="comment">/* ANDROID */</span>
        <span class="keywordflow">if</span> (!pApp-&gt;<a class="code" href="classapp__applestreamingclient_1_1AppleStreamingClientApplication.html#a90886d14c95990ca09e84a2f12b26bed">Initialize</a>()) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Unable to initialize the application&quot;</span>);
        }

        <span class="comment">//6. Register it to the app manager</span>
        <span class="keywordflow">if</span> (!<a class="code" href="classClientApplicationManager.html#a2c932284b8aea639acc71abef326955d" title="Registers the application using its id, name, and/or alias.">ClientApplicationManager::RegisterApplication</a>(pApp)) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Unable to register application&quot;</span>);
        }

        <span class="comment">//7. Create the RTSP acceptor</span>
        <a class="code" href="classVariant.html">Variant</a> acceptorConfig;
        acceptorConfig[<a class="code" href="defines_8h.html#ac143f99cee0b72a157e6e856ddbf907f">CONF_IP</a>] = ip;
        acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>] = (uint16_t) port;
        acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>] = <a class="code" href="defines_8h.html#a3bcbc456fa975ef85a5f80c4440179c3">CONF_PROTOCOL_INBOUND_RTSP</a>;
        vector&lt;uint64_t&gt; chain;
        chain = <a class="code" href="classProtocolFactoryManager.html#a6b618d4eea431193ab6bff96d7ec5ce9" title="Resolves the protocol chain based on the given name.">ProtocolFactoryManager::ResolveProtocolChain</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]);
        <span class="keywordflow">if</span> (chain.size() == 0) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Invalid protocol chain: %s&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]));
        }
        TCPAcceptor *pAcceptor = <span class="keyword">new</span> TCPAcceptor(acceptorConfig[<a class="code" href="defines_8h.html#ac143f99cee0b72a157e6e856ddbf907f">CONF_IP</a>],
                        (uint16_t) acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>], acceptorConfig, chain);
        <span class="keywordflow">if</span> (!pAcceptor-&gt;StartAccept(pApp)) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Unable to fire up acceptor&quot;</span>);
        }

        <span class="comment">//8. Create the bin variant acceptor</span>
        acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>] = (uint16_t) (port + 1);
        acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>] = <a class="code" href="defines_8h.html#a09cfc91ccee3f450427cf8c502cadbad">CONF_PROTOCOL_INBOUND_BIN_VARIANT</a>;
        chain = <a class="code" href="classProtocolFactoryManager.html#a6b618d4eea431193ab6bff96d7ec5ce9" title="Resolves the protocol chain based on the given name.">ProtocolFactoryManager::ResolveProtocolChain</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]);
        <span class="keywordflow">if</span> (chain.size() == 0) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Invalid protocol chain: %s&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]));
        }
        pAcceptor = <span class="keyword">new</span> TCPAcceptor(acceptorConfig[CONF_IP], (uint16_t) acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>],
                        acceptorConfig, chain);
        <span class="keywordflow">if</span> (!pAcceptor-&gt;StartAccept(pApp)) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Unable to fire up acceptor&quot;</span>);
        }

        <span class="comment">//9. Create the xml variant acceptor</span>
        acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>] = (uint16_t) (port + 2);
        acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>] = <a class="code" href="defines_8h.html#a10e9bc550841c9be2ee302345799ae3c">CONF_PROTOCOL_INBOUND_XML_VARIANT</a>;
        chain = <a class="code" href="classProtocolFactoryManager.html#a6b618d4eea431193ab6bff96d7ec5ce9" title="Resolves the protocol chain based on the given name.">ProtocolFactoryManager::ResolveProtocolChain</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]);
        <span class="keywordflow">if</span> (chain.size() == 0) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Invalid protocol chain: %s&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]));
        }
        pAcceptor = <span class="keyword">new</span> TCPAcceptor(acceptorConfig[CONF_IP], (uint16_t) acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>],
                        acceptorConfig, chain);
        <span class="keywordflow">if</span> (!pAcceptor-&gt;StartAccept(pApp)) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Unable to fire up acceptor&quot;</span>);
        }

<span class="preprocessor">#ifdef HAS_PROTOCOL_RTMP</span>
<span class="preprocessor"></span>        <span class="comment">//9. Create the RTMP acceptor</span>
        acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>] = (uint16_t) (1935);
        acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>] = <a class="code" href="defines_8h.html#a1452f4093dd1b2c2e4bc3ce4f0b8d8a4">CONF_PROTOCOL_INBOUND_RTMP</a>;
        chain = <a class="code" href="classProtocolFactoryManager.html#a6b618d4eea431193ab6bff96d7ec5ce9" title="Resolves the protocol chain based on the given name.">ProtocolFactoryManager::ResolveProtocolChain</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]);
        <span class="keywordflow">if</span> (chain.size() == 0) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Invalid protocol chain: %s&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]));
        }
        pAcceptor = <span class="keyword">new</span> TCPAcceptor(acceptorConfig[CONF_IP], (uint16_t) acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>],
                        acceptorConfig, chain);
        <span class="keywordflow">if</span> (!pAcceptor-&gt;StartAccept(pApp)) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Unable to fire up acceptor&quot;</span>);
        }
<span class="preprocessor">#endif </span><span class="comment">/* HAS_PROTOCOL_RTMP */</span>

        <span class="comment">//10. Create the timer UDP protocol</span>
<span class="preprocessor">#ifdef HAS_MS_TIMER</span>
<span class="preprocessor"></span>        acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>] = (uint16_t) (port + 3);
        acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>] = <span class="stringliteral">&quot;fineTimer&quot;</span>;
        acceptorConfig[<span class="stringliteral">&quot;FineTimerPeriod&quot;</span>] = 0.2;
        chain = <a class="code" href="classProtocolFactoryManager.html#a6b618d4eea431193ab6bff96d7ec5ce9" title="Resolves the protocol chain based on the given name.">ProtocolFactoryManager::ResolveProtocolChain</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]);
        <span class="keywordflow">if</span> (chain.size() == 0) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Invalid protocol chain: %s&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(acceptorConfig[<a class="code" href="defines_8h.html#a92c748db95cd0fbc2e0052cf6ef90eed">CONF_PROTOCOL</a>]));
        }
        UDPCarrier *pUDPCarrier = UDPCarrier::Create(acceptorConfig[CONF_IP], (uint16_t) acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>]);
        <span class="keywordflow">if</span> (pUDPCarrier == NULL) {
                <a class="code" href="logging_8h.html#a821326052e3e2bf1fb2d678e9e9a6004">ASSERT</a>(<span class="stringliteral">&quot;Unable to bind on udp://%s:%hu&quot;</span>, <a class="code" href="baseplatform_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(acceptorConfig[CONF_IP]), (uint16_t) acceptorConfig[<a class="code" href="defines_8h.html#a6e2371305bc5b73b305bb08e61549ffb">CONF_PORT</a>]);
        }
        <a class="code" href="classBaseProtocol.html" title="The base class on which all atomic protocols must derive from.">BaseProtocol</a> *pTimer = <a class="code" href="classProtocolFactoryManager.html#ab8b4dd73e08192ecd6fe82d864300315" title="Creates protocol chains.">ProtocolFactoryManager::CreateProtocolChain</a>(chain, acceptorConfig);
        pTimer-&gt;<a class="code" href="classBaseProtocol.html#acfd9b799ae37a08ae8b9f12f2b2a48c0" title="Gets the far-most protocol in the protocl chain.  Far-end protocol - is the one close to the transpor...">GetFarEndpoint</a>()-&gt;<a class="code" href="classBaseProtocol.html#a03e8b7d4f729809f8dcaf824b3c4e8ff" title="Sets the IO Handler of the protocol chain.">SetIOHandler</a>(pUDPCarrier);
        pUDPCarrier-&gt;SetProtocol(pTimer-&gt;<a class="code" href="classBaseProtocol.html#acfd9b799ae37a08ae8b9f12f2b2a48c0" title="Gets the far-most protocol in the protocl chain.  Far-end protocol - is the one close to the transpor...">GetFarEndpoint</a>());
        pApp-&gt;SetFineTimerId(pTimer-&gt;<a class="code" href="classBaseProtocol.html#a9989755d645886f1fe9247928cc763f5" title="Returns the id of the protocol. Each protocol instance has an id. The id is unique across all protoco...">GetId</a>());
<span class="preprocessor">#endif </span><span class="comment">/* HAS_MS_TIMER */</span>

        inet_aton(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, &amp;<a class="code" href="api_8cpp.html#a43b849e274e445a2691540803cf0d178">gAddress</a>.sin_addr);
        memset(&amp;<a class="code" href="api_8cpp.html#a43b849e274e445a2691540803cf0d178">gAddress</a>, 0, <span class="keyword">sizeof</span> (<a class="code" href="api_8cpp.html#a43b849e274e445a2691540803cf0d178">gAddress</a>));
        <a class="code" href="api_8cpp.html#a43b849e274e445a2691540803cf0d178">gAddress</a>.sin_family = AF_INET;
        <a class="code" href="api_8cpp.html#a43b849e274e445a2691540803cf0d178">gAddress</a>.sin_port = <a class="code" href="big__endian__byte__aligned_8h.html#a13c0b3387b266559538f47f912c6bc64">EHTONS</a>(port + 1);

        <span class="comment">//10. Run</span>
        <span class="keywordflow">while</span> (IOHandlerManager::Pulse()) {
                IOHandlerManager::DeleteDeadHandlers();
                <a class="code" href="classProtocolManager.html#aaf6c48b424b8f4a43bdee8c8e7fdb6a5" title="This function makes sure that the memory allocated to all dead protocols are deleted.">ProtocolManager::CleanupDeadProtocols</a>();
        }

        <span class="comment">//11. Shutting down protocols manager;</span>
        <a class="code" href="classProtocolManager.html#a0992090e52f72e3a94a39cec8790fa61" title="This function deletes all active protocols.">ProtocolManager::Shutdown</a>();
        <a class="code" href="classProtocolManager.html#aaf6c48b424b8f4a43bdee8c8e7fdb6a5" title="This function makes sure that the memory allocated to all dead protocols are deleted.">ProtocolManager::CleanupDeadProtocols</a>();

        <span class="comment">//12. Shutting down I/O handlers manager</span>
        IOHandlerManager::ShutdownIOHandlers();
        IOHandlerManager::DeleteDeadHandlers();
        IOHandlerManager::Shutdown();

        <span class="comment">//13. Unregister and delete default protocol handler</span>
        <a class="code" href="classProtocolFactoryManager.html#ad2597f4c7c201eebd0505f78e01ae092" title="Erases the atomic protocols and protocol chains of the factory.">ProtocolFactoryManager::UnRegisterProtocolFactory</a>(pFactory);
        <span class="keyword">delete</span> pFactory;
        pFactory = NULL;

        <span class="comment">//14. Shutting down applications</span>
        <a class="code" href="classClientApplicationManager.html#ac0a626d3bb909afc604f7e006b4d1325" title="Deletes applications registered to the base client application.">ClientApplicationManager::Shutdown</a>();

        <span class="comment">//15. Shutting down the logger leaving you in the dark. Bye bye</span>
        <a class="code" href="classLogger.html#af2a1ebbeb0f6aac6dac07e9f23955d7e">Logger::Free</a>(<span class="keyword">true</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8ace7da838c2aa40c7118df89795ef29"></a><!-- doxytag: member="api.h::EnvStop" ref="a8ace7da838c2aa40c7118df89795ef29" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EnvStop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00232">232</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">               {
        IOHandlerManager::SignalShutdown();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a629bc43d7bf391de3a2f97bb3e1d1adb"></a><!-- doxytag: member="api.h::InfoBandwidth" ref="a629bc43d7bf391de3a2f97bb3e1d1adb" args="(uint32_t contextId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> InfoBandwidth </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00389">389</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#ab376999c2cf858f9e379e28eb85e0c03">ASC_REQ_BUILD_INFO_BANDWIDTH</a>(request, contextId);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac23324ee9e7114a0a481c22edeb105b3"></a><!-- doxytag: member="api.h::InfoListAllStreams" ref="ac23324ee9e7114a0a481c22edeb105b3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> InfoListAllStreams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00381">381</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                             {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#ab96c9b186ff08d5dbffdefa7de9bcaf7">ASC_REQ_BUILD_INFO_LIST_ALL_STREAMS</a>(request);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4675628c3e59a905828e980a254398b6"></a><!-- doxytag: member="api.h::InfoListStreams" ref="a4675628c3e59a905828e980a254398b6" args="(uint32_t contextId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> InfoListStreams </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00373">373</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#a227aef113052e81311332b8c0ac326a3">ASC_REQ_BUILD_INFO_LIST_STREAMS</a>(request, contextId);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8d6e62746bf0d328d3f97bcb433c951f"></a><!-- doxytag: member="api.h::InfoPlayback" ref="a8d6e62746bf0d328d3f97bcb433c951f" args="(uint32_t contextId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVariant.html">Variant</a> InfoPlayback </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>contextId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00397">397</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
        <a class="code" href="classVariant.html">Variant</a> request;
        <a class="code" href="messagestructure_8h.html#a25b0ea76e85cd963c43b82e98c07a80e">ASC_REQ_BUILD_INFO_PLAYBACK</a>(request, contextId);
        <a class="code" href="classVariant.html">Variant</a> response;
        <a class="code" href="api_8cpp.html#a314d2fe05c0a8fe6e78bef3ee124047f">SEND_VARIANT_REQUEST</a>(request, response);
        <span class="keywordflow">return</span> response;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc00f885c960e094ddd7341b21d73426"></a><!-- doxytag: member="api.h::WaitEnvReady" ref="adc00f885c960e094ddd7341b21d73426" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WaitEnvReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="api_8cpp_source.html#l00217">217</a> of file <a class="el" href="api_8cpp_source.html">api.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                    {
        <span class="keywordtype">int</span> fd = socket(PF_INET, SOCK_STREAM, 0);
        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
                <span class="keywordflow">if</span> (<a class="code" href="api_8cpp.html#a43b849e274e445a2691540803cf0d178">gAddress</a>.sin_port == 0) {
                        sleep(1);
                        <span class="keywordflow">continue</span>;
                }
                <span class="keywordtype">int</span> res = connect(fd, (sockaddr *) &amp; <a class="code" href="api_8cpp.html#a43b849e274e445a2691540803cf0d178">gAddress</a>, <span class="keyword">sizeof</span> (gAddress));
                <span class="keywordflow">if</span> (res == 0)
                        <span class="keywordflow">break</span>;
                sleep(1);
        }
        close(fd);
}
</pre></div>
</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Oct 19 2011 15:53:36 for crtmpserver by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
