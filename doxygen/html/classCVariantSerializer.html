<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>crtmpserver: CVariantSerializer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">crtmpserver</div>
   <div id="projectbrief">AmediaserverforAdobe®Flash®,Apple®iOSdevicesandblahblah.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a>  </div>
  <div class="headertitle">
<h1>CVariantSerializer Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CVariantSerializer" -->
<p><a href="classCVariantSerializer-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#a4b9505ed8c78a464a1acfca5958f20c5">DeserializeFromXML</a> ($rawXml)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#a43a7f5c6aeab6e8d4e1750335d569c2b">SerializeToXML</a> ($obj)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#af9b440d5f6816e51bb2868390c2ec527">$classFactory</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#aeb693abb6781396f568f44e57d2e0564">$lastErrorDesc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#a6c126965f9afd33734d31201b946b1ba">$deserializedObject</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#a3134f7d8ef8beb0c00f04016ff4cc4e4">$serializedXml</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#ad2cc10bb7d47d03dd66e75f64930f42e">SerializeToXMLNode</a> ($obj, $name, &amp;$xmlDoc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a> ($description)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a> ($description)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#aac7db603a848ec34a806b04c4fe3ffef">GetAttribute</a> ($node, $name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCVariantSerializer.html#a6e0c49dc7c035e76f4fada67b5c70ad6">DeserializeFromXMLNode</a> ($node, &amp;$result)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Description of <a class="el" href="classCVariantSerializer.html">CVariantSerializer</a></p>
<dl class="author"><dt><b>Author:</b></dt><dd>Gavriloaie Eugen-Andrei (<a href="mailto:shiretu@gmail.com">shiretu@gmail.com</a>) </dd></dl>

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00036">36</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a900b0cf012c80f42ba4dd58215879e04"></a><!-- doxytag: member="CVariantSerializer::DeserializeError" ref="a900b0cf012c80f42ba4dd58215879e04" args="($description)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::DeserializeError </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>description</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00196">196</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {
        $this-&gt;deserializedObject=null;
        $this-&gt;lastErrorDesc.=<span class="stringliteral">&quot;\n&quot;</span>.$description;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a4b9505ed8c78a464a1acfca5958f20c5"></a><!-- doxytag: member="CVariantSerializer::DeserializeFromXML" ref="a4b9505ed8c78a464a1acfca5958f20c5" args="($rawXml)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::DeserializeFromXML </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>rawXml</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00042">42</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
        <span class="keywordflow">if</span>(!is_string($rawXml)) {
            $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;rawXml is not a string&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        <span class="keywordflow">if</span>($rawXml==<span class="stringliteral">&quot;&quot;</span>) {
            $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;rawXml is an empty string&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        $this-&gt;deserializedObject=null;
        $this-&gt;lastErrorDesc=<span class="stringliteral">&quot;&quot;</span>;
        <span class="keywordflow">if</span>($this-&gt;<a class="code" href="input_8php.html#ac2b99dd3561f56e4616217e212af2bdb">classFactory</a>!=null) {
            <span class="keywordflow">if</span>(!($this-&gt;<a class="code" href="input_8php.html#ac2b99dd3561f56e4616217e212af2bdb">classFactory</a> instanceof <a class="code" href="classCClassFactory.html">CClassFactory</a>)) {
                $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;the class factory is not an instance of CClassFactory&quot;</span>);
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
        }
        <span class="keywordflow">try</span> {
            $xmlDoc = <span class="keyword">new</span> DOMDocument();
            $xmlDoc-&gt;loadXML($rawXml);
            <span class="keywordflow">if</span>($xmlDoc-&gt;documentElement==null) {
                $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;provided xml doesn&#39;t have any content&quot;</span>);
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="keywordflow">if</span>(!$this-&gt;<a class="code" href="classCVariantSerializer.html#a6e0c49dc7c035e76f4fada67b5c70ad6">DeserializeFromXMLNode</a>($xmlDoc-&gt;documentElement,$this-&gt;deserializedObject)) {
                $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;Error occured while deserializing the xml&quot;</span>);
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        } <span class="keywordflow">catch</span> (Exception $exc) {
            $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;Exception occured while deserializing the xml:\n&quot;</span>.$exc-&gt;getTraceAsString());
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a6e0c49dc7c035e76f4fada67b5c70ad6"></a><!-- doxytag: member="CVariantSerializer::DeserializeFromXMLNode" ref="a6e0c49dc7c035e76f4fada67b5c70ad6" args="($node, &amp;$result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::DeserializeFromXMLNode </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00215">215</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
        <span class="keywordflow">switch</span>(strtolower($node-&gt;tagName)) {
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;map&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;typed_map&quot;</span>:
                $result=array();
                <span class="keywordflow">for</span>($subNode=$node-&gt;firstChild;$subNode!=null;$subNode=$subNode-&gt;nextSibling) {
                    <span class="keywordflow">if</span>($subNode-&gt;nodeType!=XML_ELEMENT_NODE) {
                        <span class="keywordflow">continue</span>;
                    }
                    $key=$this-&gt;<a class="code" href="classCVariantSerializer.html#aac7db603a848ec34a806b04c4fe3ffef">GetAttribute</a>($subNode, <span class="stringliteral">&quot;name&quot;</span>);
                    <span class="keywordflow">if</span>(strpos($key, <span class="stringliteral">&quot;__index__value__&quot;</span>)===0) {
                        $key=intval(substr($key, 16));
                    }
                    <span class="keywordflow">if</span>(!$this-&gt;<a class="code" href="classCVariantSerializer.html#a6e0c49dc7c035e76f4fada67b5c70ad6">DeserializeFromXMLNode</a>($subNode,$result[$key])) {
                        $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;Error occured while deserializing the xml: DeserializeFromXMLNode&quot;</span>);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                    }
                }
                <span class="keywordflow">if</span>(strtolower($node-&gt;tagName)==<span class="stringliteral">&quot;typed_map&quot;</span>) {
                    $typeName=$this-&gt;<a class="code" href="classCVariantSerializer.html#aac7db603a848ec34a806b04c4fe3ffef">GetAttribute</a>($node, <span class="stringliteral">&quot;typename&quot;</span>);
                    <span class="keywordflow">if</span>($this-&gt;<a class="code" href="input_8php.html#ac2b99dd3561f56e4616217e212af2bdb">classFactory</a>!=null) {
                        $errorDesc=<span class="stringliteral">&quot;&quot;</span>;
                        $result=$this-&gt;<a class="code" href="input_8php.html#ac2b99dd3561f56e4616217e212af2bdb">classFactory</a>-&gt;GetInstance($typeName,$result,$errorDesc);
                        <span class="keywordflow">if</span>($result==null) {
                            $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;Error occured while deserializing the xml: classFactory-&gt;GetInstance returned null. Error was: &quot;</span>.$errorDesc);
                            <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                    }
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;null&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;undefined&quot;</span>:
                $result=null;
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;bool&quot;</span>:
                $result=strtolower($node-&gt;nodeValue)==<span class="stringliteral">&quot;true&quot;</span>;
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;int8&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;int16&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;int32&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;int64&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;uint8&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;uint16&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;uint32&quot;</span>:
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;uint64&quot;</span>:
                $result=intval($node-&gt;nodeValue);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;double&quot;</span>:
                $result=floatval($node-&gt;nodeValue);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;str&quot;</span>:
                $result=$node-&gt;nodeValue;
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;date&quot;</span>:
                $result=DateTime::createFromFormat(<span class="stringliteral">&quot;Y-m-d H:i:s&quot;</span>, $node-&gt;nodeValue.<span class="stringliteral">&quot; 00:00:00&quot;</span>, <span class="keyword">new</span> DateTimeZone(<span class="stringliteral">&quot;UTC&quot;</span>));
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;time&quot;</span>:
                $result=DateTime::createFromFormat(<span class="stringliteral">&quot;Y-m-d H:i:s.000&quot;</span>, <span class="stringliteral">&quot;1970-01-01 &quot;</span>.$node-&gt;nodeValue, <span class="keyword">new</span> DateTimeZone(<span class="stringliteral">&quot;UTC&quot;</span>));
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">case</span> <span class="stringliteral">&quot;timestamp&quot;</span>:
                $result=DateTime::createFromFormat(<span class="stringliteral">&quot;Y-m-d\TH:i:s.000&quot;</span>, $node-&gt;nodeValue, <span class="keyword">new</span> DateTimeZone(<span class="stringliteral">&quot;UTC&quot;</span>));
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            <span class="keywordflow">default</span>:
                $this-&gt;<a class="code" href="classCVariantSerializer.html#a900b0cf012c80f42ba4dd58215879e04">DeserializeError</a>(<span class="stringliteral">&quot;Error occured while deserializing the xml: &quot;</span>.$node-&gt;tagName.<span class="stringliteral">&quot; not implemented yet&quot;</span>);
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aac7db603a848ec34a806b04c4fe3ffef"></a><!-- doxytag: member="CVariantSerializer::GetAttribute" ref="aac7db603a848ec34a806b04c4fe3ffef" args="($node, $name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::GetAttribute </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00206">206</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
        <span class="keywordflow">foreach</span>($node-&gt;attributes as $attribute) {
            <span class="keywordflow">if</span>(strtolower($attribute-&gt;name)==strtolower($name)) {
                <span class="keywordflow">return</span> $attribute-&gt;value;
            }
        }
        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a597d707244c5bee952667210cb2668c0"></a><!-- doxytag: member="CVariantSerializer::SerializeError" ref="a597d707244c5bee952667210cb2668c0" args="($description)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::SerializeError </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>description</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00201">201</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                  {
        $this-&gt;serializedXml=null;
        $this-&gt;lastErrorDesc.=<span class="stringliteral">&quot;\n&quot;</span>.$description;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a43a7f5c6aeab6e8d4e1750335d569c2b"></a><!-- doxytag: member="CVariantSerializer::SerializeToXML" ref="a43a7f5c6aeab6e8d4e1750335d569c2b" args="($obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::SerializeToXML </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00077">77</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
        $xmlDoc = <span class="keyword">new</span> DOMDocument();
        $node=$this-&gt;<a class="code" href="classCVariantSerializer.html#ad2cc10bb7d47d03dd66e75f64930f42e">SerializeToXMLNode</a>($obj,<span class="stringliteral">&quot;&quot;</span>,$xmlDoc);
        <span class="keywordflow">if</span>($node==null) {
            $this-&gt;<a class="code" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a>(<span class="stringliteral">&quot;SerializeToXMLNode failed&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
        $xmlDoc-&gt;appendChild($node);
        $this-&gt;serializedXml=$xmlDoc-&gt;saveXML();
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ad2cc10bb7d47d03dd66e75f64930f42e"></a><!-- doxytag: member="CVariantSerializer::SerializeToXMLNode" ref="ad2cc10bb7d47d03dd66e75f64930f42e" args="($obj, $name, &amp;$xmlDoc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::SerializeToXMLNode </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>xmlDoc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00089">89</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
        <span class="keywordflow">if</span>(is_array($obj)) {
            $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;MAP&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
            $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;name&quot;</span>));
            $node-&gt;setAttribute(<span class="stringliteral">&quot;name&quot;</span>, $name);
            $isArray=count($obj)!=0;
            <span class="keywordflow">foreach</span>($obj as $k =&gt; $v) {
                $subnodeName=<span class="stringliteral">&quot;&quot;</span>;
                <span class="keywordflow">if</span>(is_numeric($k)) {
                    $subnodeName=<span class="stringliteral">&quot;__index__value__&quot;</span>.$k;
                }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(is_string($k)) {
                    $isArray&amp;=<span class="keyword">false</span>;
                    $subnodeName=$k;
                }<span class="keywordflow">else</span> {
                    $this-&gt;<a class="code" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a>(<span class="stringliteral">&quot;Key must be either string or numeric&quot;</span>);
                    <span class="keywordflow">return</span> null;
                }
                $subNode=$this-&gt;<a class="code" href="classCVariantSerializer.html#ad2cc10bb7d47d03dd66e75f64930f42e">SerializeToXMLNode</a>($v,$subnodeName,$xmlDoc);
                <span class="keywordflow">if</span>($subNode==null) {
                    $this-&gt;<a class="code" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a>(<span class="stringliteral">&quot;SerializeToXMLNode failed&quot;</span>);
                    <span class="keywordflow">return</span> null;
                }
                $node-&gt;appendChild($subNode);
            }
            $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;isArray&quot;</span>));
            $node-&gt;setAttribute(<span class="stringliteral">&quot;isArray&quot;</span>, $isArray?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>);
            <span class="keywordflow">return</span> $node;
        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(is_object($obj)) {
            $node=null;
            <span class="keywordflow">if</span>(get_class($obj)==<span class="stringliteral">&quot;DateTime&quot;</span>) {
                $strVal=$obj-&gt;format(<span class="stringliteral">&quot;Y-m-d\TH:i:s.000&quot;</span>);
                <span class="keywordflow">if</span>(substr($strVal, 0,10)==<span class="stringliteral">&quot;1970-01-01&quot;</span>) {
                    $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;TIME&quot;</span>,substr($strVal, 11));
                }<span class="keywordflow">else</span> {
                    <span class="keywordflow">if</span>(substr($strVal, 11)==<span class="stringliteral">&quot;00:00:00.000&quot;</span>) {
                        $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;DATE&quot;</span>,substr($strVal,0,10));
                    }<span class="keywordflow">else</span> {
                        $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;TIMESTAMP&quot;</span>,$strVal);
                    }
                }
                $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;name&quot;</span>));
                $node-&gt;setAttribute(<span class="stringliteral">&quot;name&quot;</span>, $name);
            }<span class="keywordflow">else</span> {
                <span class="keywordflow">if</span>(!($obj instanceof <a class="code" href="classCSerializableObject.html">CSerializableObject</a>)) {
                    $this-&gt;<a class="code" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a>(<span class="stringliteral">&quot;Encountered an object which doesn&#39;t implements CSerializableObject: &quot;</span>.get_class($obj));
                    <span class="keywordflow">return</span> null;
                }
                $rawArray=array();
                <span class="keywordflow">if</span>($obj-&gt;Serialize($rawArray)!==<span class="keyword">true</span>) {
                    $this-&gt;<a class="code" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a>(<span class="stringliteral">&quot;CSerializableObject failed to serialize. Class name: &quot;</span>.get_class($obj));
                    <span class="keywordflow">return</span> null;
                }

                $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;TYPED_MAP&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
                $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;name&quot;</span>));
                $node-&gt;setAttribute(<span class="stringliteral">&quot;name&quot;</span>, $name);
                $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;typeName&quot;</span>));
                $node-&gt;setAttribute(<span class="stringliteral">&quot;typeName&quot;</span>, get_class($obj));
                $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;isArray&quot;</span>));
                $node-&gt;setAttribute(<span class="stringliteral">&quot;isArray&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>);
                <span class="keywordflow">foreach</span>($rawArray as $k =&gt; $v) {
                    $subnodeName=<span class="stringliteral">&quot;&quot;</span>;
                    <span class="keywordflow">if</span>(is_numeric($k)) {
                        $subnodeName=<span class="stringliteral">&quot;__index__value__&quot;</span>.$k;
                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(is_string($k)) {
                        $subnodeName=$k;
                    }<span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a>(<span class="stringliteral">&quot;Key must be either string or numeric&quot;</span>);
                        <span class="keywordflow">return</span> null;
                    }
                    $subNode=$this-&gt;<a class="code" href="classCVariantSerializer.html#ad2cc10bb7d47d03dd66e75f64930f42e">SerializeToXMLNode</a>($v,$subnodeName,$xmlDoc);
                    <span class="keywordflow">if</span>($subNode==null) {
                        $this-&gt;<a class="code" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a>(<span class="stringliteral">&quot;SerializeToXMLNode failed&quot;</span>);
                        <span class="keywordflow">return</span> null;
                    }
                    $node-&gt;appendChild($subNode);
                }
                <span class="keywordflow">return</span> $node;
            }
            <span class="keywordflow">return</span> $node;
        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(is_string($obj)) {
            $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;STR&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
            $node-&gt;appendChild($xmlDoc-&gt;createTextNode($obj));
            $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;name&quot;</span>));
            $node-&gt;setAttribute(<span class="stringliteral">&quot;name&quot;</span>, $name);
            <span class="keywordflow">return</span> $node;
        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(is_numeric($obj)) {
            $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;DOUBLE&quot;</span>, $obj);
            $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;name&quot;</span>));
            $node-&gt;setAttribute(<span class="stringliteral">&quot;name&quot;</span>, $name);
            <span class="keywordflow">return</span> $node;
        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(is_bool($obj)) {
            $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;BOOL&quot;</span>, $obj?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>);
            $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;name&quot;</span>));
            $node-&gt;setAttribute(<span class="stringliteral">&quot;name&quot;</span>, $name);
            <span class="keywordflow">return</span> $node;
        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>($obj==null) {
            $node=$xmlDoc-&gt;createElement(<span class="stringliteral">&quot;NULL&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
            $node-&gt;appendChild($xmlDoc-&gt;createAttribute(<span class="stringliteral">&quot;name&quot;</span>));
            $node-&gt;setAttribute(<span class="stringliteral">&quot;name&quot;</span>, $name);
            <span class="keywordflow">return</span> $node;
        }<span class="keywordflow">else</span> {
            $this-&gt;<a class="code" href="classCVariantSerializer.html#a597d707244c5bee952667210cb2668c0">SerializeError</a>(<span class="stringliteral">&quot;This is not a serializable object&quot;</span>);
            <span class="keywordflow">return</span> null;
        }
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="af9b440d5f6816e51bb2868390c2ec527"></a><!-- doxytag: member="CVariantSerializer::$classFactory" ref="af9b440d5f6816e51bb2868390c2ec527" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::$<a class="el" href="input_8php.html#ac2b99dd3561f56e4616217e212af2bdb">classFactory</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00037">37</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>

</div>
</div>
<a class="anchor" id="a6c126965f9afd33734d31201b946b1ba"></a><!-- doxytag: member="CVariantSerializer::$deserializedObject" ref="a6c126965f9afd33734d31201b946b1ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::$deserializedObject</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00039">39</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>

</div>
</div>
<a class="anchor" id="aeb693abb6781396f568f44e57d2e0564"></a><!-- doxytag: member="CVariantSerializer::$lastErrorDesc" ref="aeb693abb6781396f568f44e57d2e0564" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::$lastErrorDesc</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00038">38</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>

</div>
</div>
<a class="anchor" id="a3134f7d8ef8beb0c00f04016ff4cc4e4"></a><!-- doxytag: member="CVariantSerializer::$serializedXml" ref="a3134f7d8ef8beb0c00f04016ff4cc4e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVariantSerializer::$serializedXml</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CVariantSerializer_8php_source.html#l00040">40</a> of file <a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>branches/1.0/sources/applications/phpframework/variant/<a class="el" href="CVariantSerializer_8php_source.html">CVariantSerializer.php</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Oct 19 2011 15:53:38 for crtmpserver by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
